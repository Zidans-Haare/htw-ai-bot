# ========================================================================================
# HTW ABC AI Bot - Environment Configuration
# ========================================================================================
# Copy this file to .env and configure the values for your environment.
# Required variables are marked with [REQUIRED], optional with [OPTIONAL].
# ========================================================================================

# ========================================================================================
# AI CHAT CONFIGURATION [REQUIRED]
# ========================================================================================

# AI Provider Selection [REQUIRED]
# Options: openai (official OpenAI + compatible APIs like university chatAi), google (Gemini), claude (Anthropic), xai
AI_PROVIDER=openai

# Primary API Key [REQUIRED] - Used for the selected AI_PROVIDER above
AI_API_KEY=your-api-key-here

# Base URL for API calls [OPTIONAL] - Required for chatAi and xai providers
AI_BASE_URL=https://chat-ai.academiccloud.de/v1

# AI Model Selection [OPTIONAL] - Uses provider default if not specified
AI_MODEL=meta-llama-3.1-8b-instruct

# ========================================================================================
# UNIVERSITY CHATAI CONFIGURATION EXAMPLE
# ========================================================================================
# To use the university's chatAi API (previously AI_PROVIDER=chatAi), use:
# AI_PROVIDER=openai
# AI_BASE_URL=https://chat-ai.academiccloud.de/v1
# AI_MODEL=openai-gpt-oss-120b
# AI_API_KEY=your-university-api-key

# Response Temperature [OPTIONAL] - Controls randomness (0.0 = deterministic, 2.0 = very random)
# Range: 0.0 - 2.0, Default: 0.2
AI_TEMPERATURE=0.2

# Maximum Response Tokens [OPTIONAL] - Limits response length
# Default: 1000
AI_MAX_TOKENS=1000

# Enable Streaming Responses [OPTIONAL] - Send responses as they are generated
# Options: true, false, Default: true
AI_STREAMING=true

# ========================================================================================
# BACKEND AI CONFIGURATION [OPTIONAL]
# ========================================================================================
# Option to use separate settings for the backend part of the app

# Backend AI Provider Selection [OPTIONAL]
# Options: openai (official OpenAI + compatible APIs like university chatAi), google (Gemini), claude (Anthropic), xai
BACKEND_AI_PROVIDER=

# Backend Primary API Key [OPTIONAL] - Used for the selected BACKEND_AI_PROVIDER above
BACKEND_AI_API_KEY=

# Backend Base URL for API calls [OPTIONAL] - Required for chatAi and xai providers
BACKEND_AI_BASE_URL=

# Backend Official OpenAI Base URL [OPTIONAL]
BACKEND_AI_OPENAI_BASE_URL=

# Backend XAI Base URL [OPTIONAL]
BACKEND_AI_XAI_BASE_URL=

# Backend AI Model Selection [OPTIONAL] - Uses provider default if not specified
BACKEND_AI_MODEL=

# Backend Response Temperature [OPTIONAL] - Controls randomness (0.0 = deterministic, 2.0 = very random)
# Range: 0.0 - 2.0, Default: 0.2
BACKEND_AI_TEMPERATURE=

# Backend Maximum Response Tokens [OPTIONAL] - Limits response length, set higher because backend tasks are more complex
# Default: 8000
BACKEND_AI_MAX_TOKENS=8000

# ========================================================================================
# PROVIDER-SPECIFIC API KEYS [OPTIONAL]
# ========================================================================================
# These override AI_API_KEY for specific providers when using multiple providers

# Official OpenAI API Key [OPTIONAL]
AI_OPENAI_API_KEY=

# Google Gemini API Key [OPTIONAL]
AI_GOOGLE_API_KEY=

# Anthropic Claude API Key [OPTIONAL]
AI_CLAUDE_API_KEY=

# XAI API Key [OPTIONAL]
AI_XAI_API_KEY=

# ========================================================================================
# BACKEND PROVIDER-SPECIFIC API KEYS [OPTIONAL]
# ========================================================================================
# These override BACKEND_AI_API_KEY for specific providers when using multiple providers for backend

# Backend Official OpenAI API Key [OPTIONAL]
BACKEND_AI_OPENAI_API_KEY=

# Backend Google Gemini API Key [OPTIONAL]
BACKEND_AI_GOOGLE_API_KEY=

# Backend Anthropic Claude API Key [OPTIONAL]
BACKEND_AI_CLAUDE_API_KEY=

# Backend XAI API Key [OPTIONAL]
BACKEND_AI_XAI_API_KEY=

# Backend Official OpenAI Base URL [OPTIONAL]
BACKEND_AI_OPENAI_BASE_URL=

# Backend XAI Base URL [OPTIONAL]
BACKEND_AI_XAI_BASE_URL=

# ========================================================================================
# SERVER CONFIGURATION [OPTIONAL]
# ========================================================================================

# Server Port [OPTIONAL] - Port for the Express server to listen on
# Default: 3000
PORT=3000

# Trust Proxy Count [OPTIONAL] - Number of proxy layers (e.g., Cloudflare + Nginx)
# Default: 2
TRUST_PROXY_COUNT=2

# ========================================================================================
# DATABASE CONFIGURATION [REQUIRED]
# ========================================================================================

# Main Database Connection [REQUIRED] - Supports SQLite, PostgreSQL, and MySQL
# SQLite (default - file-based, no server required):
DATABASE_URL="file:/home/htw/htc-abc-ai-bot/hochschuhl-abc.db"

# PostgreSQL example:
# DATABASE_URL="postgresql://username:password@localhost:5432/dbname?schema=public"

# MySQL example:
# DATABASE_URL="mysql://username:password@localhost:3306/dbname"

# ========================================================================================
# SESSION & AUTHENTICATION [OPTIONAL]
# ========================================================================================

# Session Inactivity Timeout [OPTIONAL] - Minutes after last activity before session expires
# Also sets client-side cookie expiration. Default: 1440 (24 hours)
SESSION_INACTIVITY_TIMEOUT_MINUTES=1440

# Maximum Session Duration [OPTIONAL] - Maximum minutes from session creation
# Default: 43200 (30 days)
SESSION_MAX_DURATION_MINUTES=43200

# ========================================================================================
# VECTOR DATABASE CONFIGURATION [OPTIONAL]
# ========================================================================================
# Used for document embeddings and semantic search

# Vector Database Type [OPTIONAL] - Enable vector database for advanced features
# Options: none (default), chroma, weaviate
VECTOR_DB_TYPE=none

# ChromaDB Configuration [REQUIRED if VECTOR_DB_TYPE=chroma]
CHROMA_URL=
CHROMA_COLLECTION=

# Weaviate Configuration [REQUIRED if VECTOR_DB_TYPE=weaviate]
WEAVIATE_URL=
WEAVIATE_COLLECTION=

# ========================================================================================
# EMBEDDING CONFIGURATION [OPTIONAL]
# ========================================================================================
# Used when VECTOR_DB_TYPE is enabled

# Embedding Library [OPTIONAL] - Library for generating text embeddings
# Options: none (default), huggingface, openai
EMBEDDING_LIBRARY=none

# ========================================================================================
# CHUNKING & RETRIEVAL CONFIGURATION [OPTIONAL]
# ========================================================================================

# Chunking Strategy [OPTIONAL] - How documents are split into chunks
# "semantic": Split by headings/paragraphs first, fixed-size fallback for oversized sections
# "fixed": Traditional fixed-size token splits (legacy behavior)
# Default: semantic
CHUNKING_STRATEGY=semantic

# Hybrid Search [OPTIONAL] - Combine BM25 keyword search with vector similarity
# Improves retrieval for exact terms, abbreviations, names, course IDs
# Default: true (when vector DB is active)
HYBRID_SEARCH_ENABLED=true

# RRF constant for Reciprocal Rank Fusion [OPTIONAL]
# Higher values give more weight to lower-ranked results. Default: 60
HYBRID_RRF_K=60

# Reranker [OPTIONAL] - LLM-based re-scoring of retrieval candidates
# Uses backend AI provider for an additional relevance scoring pass
# Default: false (adds ~200-500ms latency per query)
RERANKER_ENABLED=false

# Number of candidates to fetch before reranking [OPTIONAL]
# Default: 10
RERANKER_CANDIDATES=10

# User Memory [OPTIONAL] - Persist user facts across conversations
# Extracts stable facts (study program, preferences) via backend AI after each conversation
# Only works for logged-in users. Default: false
USER_MEMORY_ENABLED=false

# Maximum memory entries per user [OPTIONAL]
# Default: 20
USER_MEMORY_MAX_ENTRIES=20

# ========================================================================================
# DEVELOPMENT & DEBUGGING [OPTIONAL]
# ========================================================================================

# Domain for CORS and links [OPTIONAL] - Used in development
DOMAIN=http://localhost:3000

# Upload Size Limit [OPTIONAL] - Maximum upload size in MB
# Default: 10 (production: 50)
UPLOAD_LIMIT_MB=10

# Use New UI [OPTIONAL] - Enable the new UI
# Options: true, false, Default: true
USE_NEW_UI=true